import CoverImage from "@/components/ui/cover-image";
import InputChecker from "@/components/widgets/input-checker";
import SolutionBox from "@/components/widgets/solution-box";

<CoverImage src="/problem-assets/2025/3/cover.png" alt="DjediÄina ruta" />

# Dostava poklona Djeda Mraza

BoÅ¾iÄ‡ je jako blizu pa se djedica priprema za svoju misiju dostave poklona. Ove godine ima cijelu flotu saonica koje Ä‡e mu pomoÄ‡i u dostavi darova dobroj djeci diljem grada.

Svake saonice imaju odreÄ‘eni kapacitet i potroÅ¡nju goriva (hrana za sobove zapravo, ali koristimo gorivo da bude jednostavnije :D). Svako odrediÅ¡te ima popis Å¾eljenih poklona. BuduÄ‡i da je inflacija u velikom porastu, djedica Å¾eli smanjiti ukupne troÅ¡kove i istovremeno zadrÅ¾ati sve sretnima. Tvoj zadatak je pomoÄ‡i mu optimizirati plan dostave odabirom pravih ruta za njegove saonice.

DjediÄina baza se nalazi u ishodiÅ¡tu 2D koordinatnog sustava, a svako odrediÅ¡te je definirano svojim koordinatama (X, Y) i popisom Å¾eljenih poklona. Djedica kod sebe ima beskonaÄnu koliÄinu poklona svakog tipa koje Ä‡e rasporediti na saonice tako da minimizira potroÅ¡nju goriva. Nije moguÄ‡e prebacivanje poklona s jednih saonica na druge tijekom dostave poklona.

## Ulazni podaci

1. red: broj poklona N
2. red: N prirodnih brojeva odvojenih razmakom, gdje _i_-ti broj predstavljaja teÅ¾inu _i_-tog poklona (i = 1, 2, ..., N)
3. red: broj saonica M
4. red: M prirodnih brojeva odvojenih razmakom, gdje _i_-ti broj predstavljaja kapacitet _i_-tih saonica (i = 1, 2, ..., M)
5. red: M prirodnih brojeva odvojenih razmakom, gdje _i_-ti broj predstavljaja potroÅ¡nju goriva _i_-tih saonica (i = 1, 2, ..., M)
6. red: broj odrediÅ¡ta K

IduÄ‡ih K redova sadrÅ¾i:

- X, Y koordinate pojedinog odrediÅ¡ta (decimalni brojevi odvojeni razmakom)
- zatim vertikalnu crtu koja odvaja koordinate od liste poklona
- listu poklona - mapa tipova poklona i traÅ¾ene koliÄine (format tip:koliÄina, a pojedini parovi podataka odvojeni zarezom)

Pokloni, saonice i odrediÅ¡ta su indeksirani poÄevÅ¡i od 1.

## Izlazni podaci

M redova koji predstavaljaju rute saonica. U prvom redu nalazi se opis rute prvih saonice, u drugom redu za druge saonice itd.

Rutu za jedne saonice opisujemo nizom podataka razdvojenih razmakom. Svaki dio podataka sastoji se od indeksa odrediÅ¡ta te liste poklona koju na tom odrediÅ¡tu ostavljaju te saonice. Oznaka odrediÅ¡ta i pokloni odvojeni su vertikalnom crtom (|), a lista je opisana mapom (tip:koliÄina) kao i u ulaznim podacima.

Ako pojedine saonice ne upotrebljujemo koristimo oznaku minus (-). Nije potrebno koristiti sve saonice.

## Bodovanje

Bodovanje se sastoji od dva dijela:

- Ukupna uÄinkovitost dostave
- Najmanje prosjeÄno optereÄ‡enje saonica

Ukupan broj bodova je u rasponu [0, 100 000].

Ukupan rezultat raÄuna se kao zbroj bodova iz oba dijela.

### Ukupna uÄinkovitost dostave (70% bodova)

Ukupna uÄinkovitost mjeri koliko je djedica uspjeÅ¡no dostavio sve poklone uz Å¡to manju potroÅ¡nju goriva.

Za svake saonice raÄuna se njihov troÅ¡ak dostave:

```txt
troÅ¡ak_saonica(i) = prijeÄ‘ena_udaljenost(i) Ã— potroÅ¡nja_goriva(i)
```

Ukupna potroÅ¡nja goriva definira se kao:

```txt
ukupna_potroÅ¡nja = suma(troÅ¡ak_saonica(i)) za i = 1, ..., M
```

Bodovi za ovaj dio raÄunaju se pomoÄ‡u sljedeÄ‡e funkcije:

```txt
bodovi = 70 000 / (1 + ukupna_potroÅ¡nja / S)
```

gdje je S = 40 000 (konstanta skale dobivena iz ulaznih podataka koriÅ¡tenjem harmonijske sredine potroÅ¡nje goriva saonica).

### Najmanje prosjeÄno optereÄ‡enje saonica (30% bodova)

Ovaj dio bodovanja kaÅ¾njava rjeÅ¡enja u kojima su pojedine saonice preoptereÄ‡ene, dok druge nisu uÄinkovito iskoriÅ¡tene.

Za svake saonice raÄuna se njihovo optereÄ‡enje:

```txt
optereÄ‡enje_saonica(i) = teret_saonica(i) / kapacitet_saonica(i)
```

Zatim uzimamo raspon najveÄ‡eg i najmanjeg optereÄ‡enja svih saonica:

```txt
raspon = max_optereÄ‡enje âˆ’ min_optereÄ‡enje
```

Bodovi za ovaj dio:

bodovi = (1 âˆ’ raspon)Â² Ã— 30 000

_Napomena:_

- prijeÄ‘ena_udaljenost raÄuna se po klasiÄnoj euklidskoj formuli za udaljenost dvaju toÄaka, a ukljuÄuje put **od** i **do ishodiÅ¡ta** u toÄki (0, 0).
- teret saonica ne moÅ¾e biti veÄ‡i od kapaciteta saonica

## Primjer

### Ulaz

Razmotrimo pojednostavljeni primjer s 2 poklona, 3 saonice i 4 odrediÅ¡ta:

```txt
2                       # Broj poklona
2 5                     # Teret pojedinog poklona
3                       # Broj saonica
40 30 100               # Kapaciteti saonica
5 3 150                 # PotroÅ¡nja goriva po jedinici udaljenosti
4                       # Broj odrediÅ¡ta
0.50 0.20|1:1,2:2       # OdrediÅ¡te 1: Koordinate | Å½eljeni pokloni (Tip poklona:KoliÄina)
-0.30 0.80|1:1,2:1      # OdrediÅ¡te 2: Koordinate | Å½eljeni pokloni (Tip poklona:KoliÄina)
1.00 -0.40|1:2          # OdrediÅ¡te 3: Koordinate | Å½eljeni pokloni (Tip poklona:KoliÄina)
-0.70 -0.60|2:2         # OdrediÅ¡te 4: Koordinate | Å½eljeni pokloni (Tip poklona:KoliÄina)
```

### Izlaz

VaÅ¡ program bi mogao vratiti:

```txt
4|2:2
2|1:1,2:1 1|1:1,2:2 3|1:2
-
```

Svaki red predstavlja putanju jednih saonica.

- Prve saonice idu sa ishodiÅ¡ta na odrediÅ¡te 4 i tamo ostavljaju dva poklona tipa 2. Nakon toga se vraÄ‡aju natrag djedici.
- Druge saonice idu sa ishodiÅ¡ta na odrediÅ¡te 2 i tamo ostavljaju jedan poklona tipa 1 i jedan poklon tipa 2. Zatim odlaze na odrediÅ¡te 1 i tamo ostavljaju jedan poklon tipa 1 i dva poklona tipa 2. Na kraju idu na odrediÅ¡te 3 i ostavljaju dva poklona tipa 1. Nakon toga se vraÄ‡aju natrag djedici.
- TreÄ‡e saonice nisu koriÅ¡tene.

Sretno i veselo kodiranje! ğŸ„ğŸ“¸

<InputChecker
  inputFileUrl="/problem-assets/2025/3/input.txt"
  checkerFileUrl="/problem-assets/2025/3/tester.py"
/>

{/* <SolutionBox /> */}
